{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-3790350c51528146.js","src/library.js","src/js/galery-library.js","node_modules/@parcel/runtime-js/lib/runtime-555eb7fbb66441c4.js","node_modules/@parcel/runtime-js/lib/runtime-ebd8098654bbbb6b.js","node_modules/@parcel/runtime-js/lib/runtime-9041f4e173702076.js","node_modules/@parcel/runtime-js/lib/runtime-246d7f17877b7a3f.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.363b0dd3.js\\\",\\\"9v6fF\\\":\\\"symbol-defs.7dab1f6b.svg\\\",\\\"k0qvN\\\":\\\"reitingfull.b145141b.svg\\\",\\\"bLI2f\\\":\\\"reitinghalf.68072f94.svg\\\",\\\"kzUqJ\\\":\\\"reitingzero.83703bb2.svg\\\",\\\"eunLf\\\":\\\"catalog.496b64c1.css\\\",\\\"7adTC\\\":\\\"library.683ecb27.js\\\"}\"));","import './js/pre-loader-spinner';\nimport './js/mobile-menu';\nimport './js/activMenu';\nimport './js/modal-trailer';\nimport './js/hero';\nimport './js/theme-switcher';\nimport './js/modal-footer';\nimport './js/galery-library';\nimport './js/scroll-to-top';\n","import { fetchAllGet } from './fetchAllGet';\nimport { refs } from './refs';\nimport ratingStarFull from '../images/reitingfull.svg';\nimport starIconFull from '../images/reitingfull.svg';\nimport starIconHalf from '../images/reitinghalf.svg';\nimport starIconZero from '../images/reitingzero.svg';\nimport iconClose from '../images/symbol-defs.svg';\nconst BASE_URL = 'https://api.themoviedb.org';\nconst API_KEY = '5bf13f442a6612ea903461e28536fdca';\n\nparseLocStor();\n\nrefs.galeryLibrarySelect.addEventListener('change', handlerSelect);\n\nfunction handlerSelect(e) {\n  refs.galeryLibraryBtn.classList.remove('visually-hidden');\n  refs.galeryLibrary.textContent = '';\n  parseLocStor(e.currentTarget.value);\n}\n\nfunction parseLocStor(genre = 'all') {\n  if (!JSON.parse(localStorage.getItem('favoriteFilm'))?.id.length) {\n    refs.galeryLibraryBtn.addEventListener('click', handlerBtnLoad);\n    const str = `<div class=\"galery-library-text\"><span>OOPS...</span><span>We are very sorry!</span><span>You donâ€™t have any movies at your library.</span></div>`;\n    refs.galeryLibrary.insertAdjacentHTML('beforeend', str);\n    refs.galeryLibraryBtn.textContent = 'Search movie';\n\n    function handlerBtnLoad(e) {\n      e.preventDefault();\n      e.currentTarget.removeEventListener('click', handlerBtnLoad);\n      location.href = './catalog.html';\n    }\n    refs.galeryLibraryBtn.textContent = 'Search movie';\n    refs.galeryLibrarySelect.classList.add('visually-hidden');\n  } else {\n    const idFilm = {\n      id: [...JSON.parse(localStorage.getItem('favoriteFilm')).id],\n      id_9: [],\n      id_j: [],\n      page: 1,\n    };\n\n    if (idFilm.id.length > 9) {\n      refs.galeryLibraryBtn.classList.remove('visually-hidden');\n    } else {\n      refs.galeryLibraryBtn.classList.add('visually-hidden');\n    }\n\n    function createMas() {\n      let m = [];\n      let j = [];\n      idFilm.id.map((el, i) => {\n        i++;\n        m.push(el);\n        if (i % 9 === 0) {\n          j.push(m);\n          m = [];\n        }\n      });\n      j.push(m);\n      return j;\n    }\n\n    if (genre === 'all') {\n      pageCardFilm(0);\n    } else {\n      idFilm.id.map((el, i) => {\n        const ENDPOINT = `/3/movie/${el}`;\n        fetchAllGet(BASE_URL, ENDPOINT, API_KEY, '&language=en-US&page=1')\n          .then(markUpSort)\n          .catch(console.log);\n      });\n    }\n\n    function finalyMarkUp() {\n      refs.galeryLibraryBtnClose = document.querySelectorAll(\n        '.galery-library-btn-close'\n      );\n      refs.galeryLibraryBtnCloseSpan = document.querySelectorAll(\n        '.card-backdrop + span'\n      );\n      refs.cardFilm1 = document.querySelectorAll('.card-film');\n      refs.galeryLibraryBtnClose.forEach((el, i) => {\n        el.addEventListener('mouseover', e => {\n          refs.galeryLibraryBtnCloseSpan[i].classList.toggle('visually-hidden');\n        });\n\n        el.addEventListener('mouseout', e => {\n          refs.galeryLibraryBtnCloseSpan[i].classList.toggle('visually-hidden');\n        });\n\n        el.addEventListener('click', e => {\n          handlerBtnClose(e, refs.cardFilm1[i].getAttribute('id'), i);\n        });\n      });\n    }\n\n    function handlerBtnClose(e, id, i) {\n      e.preventDefault();\n      if (e.target.nodeName === 'BUTTON') {\n        idFilm.id.splice(idFilm.id.indexOf(id), 1);\n        idFilm.id_9.splice(idFilm.id.indexOf(id), 1);\n        localStorage.setItem('favoriteFilm', JSON.stringify(idFilm));\n        refs.cardFilm1[i].classList.add('visually-hidden');\n      }\n    }\n\n    function pageCardFilm(n) {\n      idFilm.id_9 = createMas();\n      idFilm.id_9[n].map((el, i, arr) => {\n        const ENDPOINT = `/3/movie/${el}`;\n        fetchAllGet(BASE_URL, ENDPOINT, API_KEY, '&language=en-US&page=1')\n          .then(markUp)\n          .catch(console.log)\n          .finally(() => {\n            if (i === arr.length - 1) {\n              finalyMarkUp();\n            }\n          });\n      });\n    }\n\n    function markUpSort(data, i) {\n      let cardFilm = '';\n      refs.galeryLibraryBtn.classList.add('visually-hidden');\n      const {\n        original_title,\n        poster_path,\n        vote_average,\n        genres,\n        release_date,\n        id,\n      } = data.data;\n      const starRatingNumber = Number(vote_average);\n      const starRatingRound = Math.round(starRatingNumber);\n      let starIcons = '';\n      for (let i = 1; i <= 5; i++) {\n        let dubbleI = i * 2;\n        if (dubbleI <= starRatingRound) {\n          starIcons += `<img class=\"card-vote-icon\" src=\"${starIconFull}\" alt=\"Rating Stars\" />`;\n        } else if (dubbleI % starRatingRound === 1) {\n          starIcons += `<img class=\"card-vote-icon\" src=\"${starIconHalf}\" alt=\"Rating Stars\" />`;\n        } else {\n          starIcons += `<img class=\"card-vote-icon\" src=\"${starIconZero}\" alt=\"Rating Stars\" />`;\n        }\n      }\n      if (\n        genres\n          .map(({ name }) => name)\n          .join(', ')\n          .toLowerCase()\n          .includes(genre)\n      ) {\n        cardFilm = htmlMarkUp(\n          ratingStarFull,\n          genres,\n          release_date,\n          original_title,\n          poster_path,\n          id,\n          starIcons\n        );\n        refs.galeryLibrary.insertAdjacentHTML('beforeend', cardFilm);\n      }\n    }\n\n    function markUp(data) {\n      const {\n        original_title,\n        poster_path,\n        vote_average,\n        genres,\n        release_date,\n        id,\n      } = data.data;\n      let cardFilm = '';\n      const starRatingNumber = Number(vote_average);\n      const starRatingRound = Math.round(starRatingNumber);\n      let starIcons = '';\n      for (let i = 1; i <= 5; i++) {\n        let dubbleI = i * 2;\n        if (dubbleI <= starRatingRound) {\n          starIcons += `<img class=\"card-vote-icon\" src=\"${starIconFull}\" alt=\"Rating Stars\" />`;\n        } else if (dubbleI % starRatingRound === 1) {\n          starIcons += `<img class=\"card-vote-icon\" src=\"${starIconHalf}\" alt=\"Rating Stars\" />`;\n        } else {\n          starIcons += `<img class=\"card-vote-icon\" src=\"${starIconZero}\" alt=\"Rating Stars\" />`;\n        }\n      }\n      if (genre === 'all') {\n        cardFilm = htmlMarkUp(\n          ratingStarFull,\n          genres,\n          release_date,\n          original_title,\n          poster_path,\n          id,\n          starIcons\n        );\n        refs.galeryLibrary.insertAdjacentHTML('beforeend', cardFilm);\n      }\n    }\n\n    function htmlMarkUp(\n      ratingStarFull,\n      genres,\n      release_date,\n      original_title,\n      poster_path,\n      id,\n      starIcons\n    ) {\n      return `\n  <div class=\"card-film\" id=\"${id}\">\n    <div class=\"card-backdrop\"></div>\n    <span class=\"visually-hidden\">Delete from Library</span>\n    <button class=\"galery-library-btn-close modal-film-btn-close\">\n    <svg class=\"modal-film-icon-close\">\n      <use href=\"${iconClose}#icon-x\"></use>\n    </svg>\n    </button>\n    <img\n      class=\"card-img\"\n      src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n      alt=\"\"\n      loading=\"lazy\"\n      srcset=\"\n        https://image.tmdb.org/t/p/w500${poster_path} 1x,\n        https://image.tmdb.org/t/p/w500${poster_path} 2x\n      \"\n    />\n    <div class=\"card-info-section\">\n      <h3 class=\"card-info-title\">${original_title}</h3>\n      <div class=\"card-info\">\n        <p class=\"card-info-text\">\n        ${genres.map(({ name }) => name).join(', ')} | ${String(\n        release_date\n      ).slice(0, 4)}\n        </p>\n        <ul class=\"card-vote\">\n                ${starIcons}\n        </ul>\n\n      </div>\n    </div>\n  </div>\n\n`;\n    }\n    refs.galeryLibraryBtn.addEventListener('click', handlerBtnLoad);\n\n    function handlerBtnLoad(e) {\n      e.preventDefault();\n      pageCardFilm(idFilm.page++);\n\n      //\n      if (idFilm.id_9.length === idFilm.page) {\n        e.currentTarget.classList.add('visually-hidden');\n      }\n    }\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"k0qvN\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bLI2f\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kzUqJ\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9v6fF\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$h4A4X","$eff29e3f6e548ee8$exports","URL","resolve","import","meta","url","toString","$e6022c74f6fa40dc$exports","$8588c92ca06d46b7$exports","$10db6f286535da77$exports","$e536e32336619b7e$var$parseLocStor","genre","ref","localStorage","getItem","idFilm","id_9","id_j","page","finalyMarkUp","$krGWQ","refs","galeryLibraryBtnClose","document","querySelectorAll","galeryLibraryBtnCloseSpan","cardFilm1","forEach","el","addEventListener","e","classList","toggle","preventDefault","target","nodeName","splice","indexOf","setItem","stringify","add","handlerBtnClose","getAttribute","pageCardFilm","n","m","j","map","push","createMas","arr","ENDPOINT","fetchAllGet","then","markUp","catch","console","log","finally","markUpSort","data","cardFilm","galeryLibraryBtn","original_title","poster_path","vote_average","genres","release_date","starRatingNumber","Number","starRatingRound","Math","round","starIcons","i1","dubbleI","$parcel$interopDefault","name","join","toLowerCase","includes","htmlMarkUp","galeryLibrary","insertAdjacentHTML","ratingStarFull","String","slice","remove","currentTarget","handlerBtnLoad","removeEventListener","location","href","str","textContent","galeryLibrarySelect","value"],"version":3,"file":"library.363b0dd3.js.map"}