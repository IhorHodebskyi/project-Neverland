{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-1a8cc2477e656458.js","src/library.js","src/js/galery-library.js","node_modules/@parcel/runtime-js/lib/runtime-555eb7fbb66441c4.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.882894fc.js\\\",\\\"k0qvN\\\":\\\"reitingfull.b145141b.svg\\\",\\\"eunLf\\\":\\\"catalog.3d8d33f6.css\\\",\\\"7adTC\\\":\\\"library.d67b616f.js\\\"}\"));","import './js/pre-loader-spinner';\nimport './js/mobile-menu';\nimport './js/activMenu';\nimport './js/modal-trailer';\nimport './js/hero';\nimport './js/theme-switcher';\nimport './js/modal-footer';\nimport './js/galery-library';\nimport './js/scroll-to-top';","import {fetchAllGet} from './fetchAllGet';\nimport { refs } from \"./refs\";\nimport ratingStarFull from '../images/reitingfull.svg';\n\nconst BASE_URL = 'https://api.themoviedb.org';\nconst API_KEY = '5bf13f442a6612ea903461e28536fdca' \n// const BASE_IMG_URL_w500 = 'https://image.tmdb.org/t/p/w500/';\n\nparseLocStor();\nrefs.galeryLibrarySelect.addEventListener('change', handlerSelect);\n// refs.galeryLibrarySelect.classList.add('visually-hidden');\n\nfunction handlerSelect(e){\n  refs.galeryLibraryBtn.classList.remove('visually-hidden');\n  refs.galeryLibrary.textContent='';\n  parseLocStor(e.currentTarget.value);\n \n \n}\n\nfunction parseLocStor(genre='all'){\n  \nif(!JSON.parse(localStorage.getItem(\"favoriteFilm\"))){\n  refs.galeryLibraryBtn.addEventListener('click', handlerBtnLoad);\n  const str=`<div class=\"galery-library-text\"><span>OOPS...</span><span>We are very sorry!</span><span>You donâ€™t have any movies at your library.</span></div>`;\n  refs.galeryLibrary.insertAdjacentHTML('beforeend', str);\n  refs.galeryLibraryBtn.textContent=\"Search movie\";\n\n  function handlerBtnLoad(e){\n    e.preventDefault();\n    e.currentTarget.removeEventListener('click', handlerBtnLoad);\n    location.href=\"./catalog.html\"\n  }\n  refs.galeryLibraryBtn.textContent = \"Search movie\";\n  refs.galeryLibrarySelect.classList.add('visually-hidden');\n}\nelse \n{ \nconst idFilm ={\n    id: [...JSON.parse(localStorage.getItem(\"favoriteFilm\")).id],\n    id_9:[],\n    id_j:[],\n    page: 1,\n}\n\nif(idFilm.id.length > 9){refs.galeryLibraryBtn.classList.remove('visually-hidden');}\nelse refs.galeryLibraryBtn.classList.add('visually-hidden');\n\nfunction createMas(){\n  let m=[];\n  let j=[];\n  idFilm.id.map((el,i)=>{\n    i++;\n    m.push(el);\n    if(i%9===0){\n      j.push(m);\n      m=[];\n    }\n  });\n  j.push(m);\n  return j;\n}\n\nif(genre==='all'){\n  pageCardFilm(0);\n  \n}\nelse {\n  idFilm.id.map((el,i)=>{const ENDPOINT = `/3/movie/${el}`\n  fetchAllGet(BASE_URL, ENDPOINT, API_KEY,'&language=en-US&page=1')\n  .then(markUpSort)\n  .catch(console.log);\n  })\n}\n\nfunction pageCardFilm(n){\n      \n      idFilm.id_9 = createMas();\n      idFilm.id_9[n].map((el,i)=>{const ENDPOINT = `/3/movie/${el}`;\n      fetchAllGet(BASE_URL, ENDPOINT, API_KEY,'&language=en-US&page=1')\n      .then(markUp)\n      .catch(console.log);\n      })\n  }\n\nfunction markUpSort(data){\n  let cardFilm='';\n  refs.galeryLibraryBtn.classList.add('visually-hidden');\n  const { original_title, poster_path, vote_average, genres, release_date, id } = data.data;\n  if(genres.map(({name})=>name).join(', ').toLowerCase().includes(genre)){\n    cardFilm = htmlMarkUp(ratingStarFull, genres, release_date, original_title, poster_path, id);\n    refs.galeryLibrary.insertAdjacentHTML('beforeend', cardFilm);\n  }\n\n}\n\nfunction markUp(data){\n    const { original_title, poster_path, vote_average, genres, release_date, id } = data.data;\n    let cardFilm='';\n    if(genre==='all'){\n      cardFilm = htmlMarkUp(ratingStarFull, genres, release_date, original_title, poster_path, id);\n      refs.galeryLibrary.insertAdjacentHTML('beforeend', cardFilm);\n    }\n        \n}\n\nfunction htmlMarkUp(ratingStarFull, genres, release_date, original_title, poster_path, id){\n  return `\n  <div class=\"card-film\" id=\"${id}\">\n    <div class=\"card-backdrop\"></div>\n    <img\n      class=\"card-img\"\n      src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n      alt=\"\"\n      loading=\"lazy\"\n      srcset=\"\n        https://image.tmdb.org/t/p/w500${poster_path} 1x,\n        https://image.tmdb.org/t/p/w500${poster_path} 2x\n      \"\n    />\n    <div class=\"card-info-section\">\n      <h3 class=\"card-info-title\">${original_title}</h3>\n      <div class=\"card-info\">\n        <p class=\"card-info-text\">\n        ${genres.map(({name})=>name).join(', ')} | ${String(release_date).slice(0, 4)}\n        </p>\n        <ul class=\"card-vote\">\n          <li class=\"card-vote-items\">\n            <img\n              class=\"card-vote-icon\"\n              src=\"${ratingStarFull}\"\n              alt=\"Rating Stars\"\n            />\n          </li>\n          <li class=\"card-vote-items\">\n            <img\n              class=\"card-vote-icon\"\n              src=\"${ratingStarFull}g\"\n              alt=\"Rating Stars\"\n            />\n          </li>\n          <li class=\"card-vote-items\">\n            <img\n              class=\"card-vote-icon\"\n              src=\"${ratingStarFull}\"\n              alt=\"Rating Stars\"\n            />\n          </li>\n          <li class=\"card-vote-items\">\n            <img\n              class=\"card-vote-icon\"\n              src=\"${ratingStarFull}\"\n              alt=\"Rating Stars\"\n            />\n          </li>\n          <li class=\"card-vote-items\">\n            <img\n              class=\"card-vote-icon\"\n              src=\"${ratingStarFull}\"\n              alt=\"Rating Stars\"\n            />\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n`;\n}\nrefs.galeryLibraryBtn.addEventListener('click', handlerBtnLoad);\n\nfunction handlerBtnLoad(e){\n  e.preventDefault();\n  pageCardFilm(idFilm.page++);\n  console.log(\"lksdjflkjd;lkfja\")\n  if(idFilm.id_9.length===idFilm.page){\n    e.currentTarget.classList.add('visually-hidden');\n    e.currentTarget.removeEventListener('click', handlerBtnLoad);\n    \n  } \n}\n}\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"k0qvN\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$h4A4X","$eff29e3f6e548ee8$exports","URL","resolve","import","meta","url","toString","$e536e32336619b7e$var$parseLocStor","genre","localStorage","getItem","idFilm","id_9","id_j","page","pageCardFilm","n","m","j","map","el","push","createMas","ENDPOINT","fetchAllGet","then","markUp","catch","console","log","markUpSort","data","cardFilm","$krGWQ","refs","galeryLibraryBtn","classList","add","original_title","poster_path","vote_average","genres","release_date","name","join","toLowerCase","includes","htmlMarkUp","$parcel$interopDefault","galeryLibrary","insertAdjacentHTML","ratingStarFull1","String","slice","remove","addEventListener","handlerBtnLoad1","e","preventDefault","currentTarget","removeEventListener","handlerBtnLoad","location","href","str","textContent","galeryLibrarySelect","value"],"version":3,"file":"library.882894fc.js.map"}